<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>حزم BNB</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .modal {
      animation: fadeIn 0.4s ease;
    }
    .modal-content {
      animation: slideUp 0.4s ease forwards;
    }
    .box::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80%;
      height: 80%;
      background: url('https://www.raed.net/img?id=1283581') no-repeat center/contain;
      opacity: 0.5;
      transition: opacity 0.4s ease;
      z-index: 0;
    }
    .box:hover::before {
      opacity: 0.8;
    }
    #countdownTimer {
      font-family: 'Arial', sans-serif;
      font-size: 1.5rem;
      font-weight: bold;
      color: #ffffff;
      background: linear-gradient(to right, #ef4444, #dc2626);
      padding: 0.5rem 1rem;
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      margin-top: 1rem;
      text-align: center;
      transition: all 0.3s ease;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 to-slate-800 flex items-center justify-center p-4 overflow-y-auto">
  <div class="container w-full max-w-4xl flex flex-col gap-8">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="box monthly relative bg-white/5 rounded-3xl border border-white/15 p-6 flex flex-col items-center justify-between h-80 cursor-pointer transition-all hover:-translate-y-2 hover:shadow-2xl hover:shadow-green-500/20">
        <div class="relative z-10 text-center flex flex-col justify-between h-full">
          <h3 class="text-yellow-400 text-xl font-bold drop-shadow-lg">باقة المستخدم الشهري</h3>
          <p class="text-white text-lg font-semibold bg-gradient-to-r from-green-500 to-green-700 px-6 py-2 rounded-xl shadow-lg mt-4 hover:scale-105 transition-transform">15 جنيه</p>
        </div>
      </div>
      <div class="box six-months relative bg-white/5 rounded-3xl border border-white/15 p-6 flex flex-col items-center justify-between h-80 cursor-pointer transition-all hover:-translate-y-2 hover:shadow-2xl hover:shadow-green-500/20">
        <div class="relative z-10 text-center flex flex-col justify-between h-full">
          <h3 class="text-yellow-400 text-xl font-bold drop-shadow-lg">*باقة 6 شهور *رجل أعمال</h3>
          <p class="text-white text-lg font-semibold bg-gradient-to-r from-green-500 to-green-700 px-6 py-2 rounded-xl shadow-lg mt-4 hover:scale-105 transition-transform">50 جنيه</p>
        </div>
      </div>
      <div class="box yearly relative bg-white/5 rounded-3xl border border-white/15 p-6 flex flex-col items-center justify-between h-80 cursor-pointer transition-all hover:-translate-y-2 hover:shadow-2xl hover:shadow-green-500/20">
        <div class="relative z-10 text-center flex flex-col justify-between h-full">
          <h3 class="text-yellow-400 text-xl font-bold drop-shadow-lg">*باقة السنوي *رائد اعمال</h3>
          <p class="text-white text-lg font-semibold bg-gradient-to-r from-green-500 to-green-700 px-6 py-2 rounded-xl shadow-lg mt-4 hover:scale-105 transition-transform">75 جنيه</p>
        </div>
      </div>
    </div>

    <!-- طريقة الدفع -->
    <div id="paymentModal" class="modal hidden fixed inset-0 bg-black bg-opacity-90 z-50 overflow-auto">
      <div class="modal-content bg-gradient-to-br from-white to-blue-50 m-[10%_auto] p-8 rounded-3xl w-full max-w-md shadow-2xl relative">
        <span class="close absolute left-4 top-4 text-3xl font-bold text-gray-600 cursor-pointer hover:text-black hover:rotate-180 transition-all">×</span>
        <h2 class="text-2xl font-bold text-gray-800 text-center mb-6">اختر وسيلة الدفع</h2>
        <input
          type="tel"
          id="pubgId"
          class="w-full p-3 border-2 border-gray-300 rounded-xl text-lg focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200 transition-all mb-4"
          placeholder="ادخل رقم هاتفك المسجل بالتطبيق"
          required
        >
        <div id="idError" class="error-message text-red-500 text-sm text-right mb-4 hidden">الرجاء إدخال رقم هاتف صحيح (مثال: 010xxxxxxxxxx)</div>

        <div class="payment-options flex flex-col gap-4">
          <label class="payment-option flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl bg-white hover:border-green-500 hover:translate-x-1 transition-all cursor-pointer">
            <input type="radio" name="payment" value="instapay" class="w-5 h-5 text-green-500">
            <img src="https://www.raed.net/img?id=1283583" alt="InstaPay" class="w-16 h-16 object-contain transition-transform hover:scale-110">
            <span class="option-text text-lg font-medium text-gray-800">انستا باي</span>
          </label>
          <label class="payment-option flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl bg-white hover:border-green-500 hover:translate-x-1 transition-all cursor-pointer">
            <input type="radio" name="payment" value="ewallet" class="w-5 h-5 text-green-500">
            <img src="https://www.raed.net/img?id=1283584" alt="Vodafone Cash" class="w-16 h-16 object-contain transition-transform hover:scale-110">
            <span class="option-text text-lg font-medium text-gray-800">فودافون كاش</span>
          </label>
        </div>

        <div id="instapayAction" class="payment-action hidden mt-6 text-center">
          <a
            href="https://ipn.eg/S/adelezaat8000/instapay/7bsz5E"
            target="_blank"
            class="inline-block px-6 py-3 bg-gradient-to-r from-green-500 to-green-700 text-white rounded-xl font-bold hover:-translate-y-1 hover:shadow-lg transition-all"
          >
            إجراء الدفع عبر انستا باي
          </a>
        </div>
        <div id="vodafoneAction" class="payment-action hidden mt-6 text-center">
          <p class="text-xl font-bold text-red-600">01000072951</p>
          <div id="countdownTimer" class="hidden">03:00</div>
          <p class="text-sm text-gray-600 mt-2">يرجى التحويل على هذا الرقم ثم إدخال رقم الهاتف المحول منه. بعد الضغط على متابعة، ستتم إعادة توجيهك إلى واتساب لإرسال التفاصيل. <span class="font-bold text-red-600">يرجى إرسال صورة إيصال التحويل في الواتساب بعد فتح المحادثة.</span></p>
          <input
            type="tel"
            id="transferPhone"
            class="w-full p-3 border-2 border-gray-300 rounded-xl text-lg focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200 transition-all mt-4"
            placeholder="ادخل رقم الهاتف المحول منه"
          >
          <div id="transferPhoneError" class="error-message text-red-500 text-sm text-right mt-2 hidden">الرجاء إدخال رقم هاتف صحيح (مثال: 010xxxxxxxxxx)</div>
        </div>

        <button
          id="continueBtn"
          class="w-full mt-6 py-4 bg-gradient-to-r from-green-500 to-green-700 text-white rounded-xl font-bold text-lg hover:-translate-y-1 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
        >
          متابعة
        </button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const boxes = document.querySelectorAll('.box');
      const modal = document.getElementById('paymentModal');
      const closeBtn = document.querySelector('.close');
      const continueBtn = document.getElementById('continueBtn');
      const instapayAction = document.getElementById('instapayAction');
      const vodafoneAction = document.getElementById('vodafoneAction');
      const paymentOptions = document.querySelectorAll('input[name="payment"]');
      const pubgId = document.getElementById('pubgId');
      const idError = document.getElementById('idError');
      const transferPhone = document.getElementById('transferPhone');
      const transferPhoneError = document.getElementById('transferPhoneError');
      const countdownTimer = document.getElementById('countdownTimer');

      let selectedPackage = '';
      let timerInterval = null;

      function startCountdown() {
        clearInterval(timerInterval);
        let timeLeft = 3 * 60; // 3 minutes in seconds
        countdownTimer.classList.remove('hidden');

        timerInterval = setInterval(() => {
          let minutes = Math.floor(timeLeft / 60);
          let seconds = timeLeft % 60;
          countdownTimer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
          timeLeft--;

          if (timeLeft < 0) {
            clearInterval(timerInterval);
            countdownTimer.textContent = 'انتهى الوقت';
            continueBtn.disabled = true;
          }
        }, 1000);
      }

      function resetCountdown() {
        clearInterval(timerInterval);
        countdownTimer.classList.add('hidden');
        countdownTimer.textContent = '03:00';
        continueBtn.disabled = false;
      }

      boxes.forEach(box => {
        box.addEventListener('click', () => {
          modal.classList.remove('hidden');
          const ucAmount = box.querySelector('h3').textContent;
          const price = box.querySelector('p').textContent;
          selectedPackage = `${ucAmount} ${price}`.trim();
        });
      });

      closeBtn.addEventListener('click', () => {
        modal.classList.add('hidden');
        resetForm();
      });

      window.addEventListener('click', (event) => {
        if (event.target === modal) {
          modal.classList.add('hidden');
          resetForm();
        }
      });

      paymentOptions.forEach(option => {
        option.addEventListener('change', () => {
          if (option.value === 'instapay') {
            instapayAction.classList.remove('hidden');
            vodafoneAction.classList.add('hidden');
            resetCountdown();
          } else if (option.value === 'ewallet') {
            instapayAction.classList.add('hidden');
            vodafoneAction.classList.remove('hidden');
            startCountdown();
          } else {
            instapayAction.classList.add('hidden');
            vodafoneAction.classList.add('hidden');
            resetCountdown();
          }
        });
      });

      continueBtn.addEventListener('click', () => {
        const selectedPayment = document.querySelector('input[name="payment"]:checked');
        const phoneNumber = pubgId.value.trim();
        const transferPhoneNumber = transferPhone.value.trim();
        const phonePattern = /^01[0-2|5]{1}[0-9]{8}$/;

        if (!phonePattern.test(phoneNumber)) {
          idError.classList.remove('hidden');
          return;
        } else {
          idError.classList.add('hidden');
        }

        if (!selectedPayment) {
          idError.textContent = 'الرجاء اختيار وسيلة دفع';
          idError.classList.remove('hidden');
          return;
        }

        if (selectedPayment.value === 'ewallet' && !phonePattern.test(transferPhoneNumber)) {
          transferPhoneError.classList.remove('hidden');
          return;
        } else {
          transferPhoneError.classList.add('hidden');
        }

        continueBtn.disabled = true;
        continueBtn.textContent = 'جاري المعالجة...';

        const paymentMethod = selectedPayment.value === 'instapay' ? 'انستا باي' : 'فودافون كاش';
        let message = `مرحباً، أود BNB:\n${selectedPackage}\nرقم هاتفي: ${phoneNumber}\nوسيلة الدفع: ${paymentMethod}`;
        if (selectedPayment.value === 'ewallet') {
          message += `\nرقم الهاتف المحول منه: ${transferPhoneNumber}\n⚠️ `;
        }
        const whatsappUrl = `https://wa.me/+201000072951?text=${encodeURIComponent(message)}`;

        setTimeout(() => {
          window.open(whatsappUrl, '_blank');
          modal.classList.add('hidden');
          resetForm();
        }, 500);
      });

      function resetForm() {
        pubgId.value = '';
        transferPhone.value = '';
        idError.classList.add('hidden');
        transferPhoneError.classList.add('hidden');
        instapayAction.classList.add('hidden');
        vodafoneAction.classList.add('hidden');
        paymentOptions.forEach(option => (option.checked = false));
        continueBtn.disabled = false;
        continueBtn.textContent = 'متابعة';
        resetCountdown();
      }
    });
  </script>
</body>
</html>
